<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-QXSB7M1EY2"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-QXSB7M1EY2');
    </script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>正在進入問卷...</title>
    <style>
        body { 
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; 
            display: flex; justify-content: center; align-items: center; 
            height: 100vh; margin: 0; background-color: #f9f9f9; 
        }
        .container { text-align: center; padding: 20px; }
        .loader { 
            border: 4px solid #f3f3f3; border-top: 4px solid #3498db; 
            border-radius: 50%; width: 30px; height: 30px; 
            animation: spin 1s linear infinite; margin: 0 auto 15px; 
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        a { color: #3498db; text-decoration: none; }
    </style>
</head>
<body>
    <div class="container">
        <div class="loader"></div>
        <h2>問卷分配中，請稍候...</h2>
        <p>如果沒有自動跳轉，請 <a id="direct-link" href="#">點擊此處</a></p>
    </div>

    <script>
        var surveys = [
            "https://forms.gle/CAcLenUUvgByfrXE9",
            "https://forms.gle/nEgWs7WxhGuvGymq8",
            "https://forms.gle/zzwquWcekXKjjxYt7"
        ];

        var randomIndex = Math.floor(Math.random() * surveys.length);
        var selectedSurvey = surveys[randomIndex];

        // 更新備用連結
        document.getElementById('direct-link').href = selectedSurvey;

        // --- 核心追蹤代碼：發送事件給 GA4 ---
        // 定義問卷名稱（Survey_1, Survey_2, Survey_3）
        var surveyLabel = "Survey_" + (randomIndex + 1);

        gtag('event', 'select_content', {
            'content_type': 'survey_redirect',
            'item_id': surveyLabel,
            'destination_url': selectedSurvey
        });
        // ---------------------------------

        // 延遲 1 秒跳轉，確保追蹤數據有時間傳送到 Google
        setTimeout(function(){
            window.location.replace(selectedSurvey);
        }, 1000);
    </script>
</body>
</html>
