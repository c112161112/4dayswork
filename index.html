<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-QXSB7M1EY2"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-QXSB7M1EY2', { 'send_page_view': true });
    </script>

    <meta charset="UTF-8">
    <title>正在進入問卷...</title>
    <style>
        body { font-family: sans-serif; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; background-color: #f9f9f9; }
        .container { text-align: center; }
    </style>
</head>
<body>
    <div class="container">
        <h2>問卷分配中...</h2>
        <p>如果沒有自動跳轉，請 <a id="direct-link" href="#">點擊此處</a></p>
    </div>

    <script>
        var surveys = [
            "https://forms.gle/CAcLenUUvgByfrXE9",
            "https://forms.gle/nEgWs7WxhGuvGymq8",
            "https://forms.gle/zzwquWcekXKjjxYt7"
        ];

        var randomIndex = Math.floor(Math.random() * surveys.length);
        var selectedSurvey = surveys[randomIndex];
        var surveyLabel = "Survey_" + (randomIndex + 1);

        document.getElementById('direct-link').href = selectedSurvey;

        // 強制發送事件
        gtag('event', 'select_content', {
            'content_type': 'survey_redirect',
            'item_id': surveyLabel,
            'event_callback': function() {
                // 當 Google 確認收到數據後，才執行跳轉
                window.location.replace(selectedSurvey);
            }
        });

        // 如果 Google 3秒內沒回應，還是要跳轉（保險機制）
        setTimeout(function(){
            window.location.replace(selectedSurvey);
        }, 3000);
    </script>
</body>
</html>
